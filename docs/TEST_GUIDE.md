# ğŸš€ é‡åŒ–å› å­æ¡†æ¶æµ‹è¯•æŒ‡å—

## å¿«é€Ÿæµ‹è¯•

### 1. å®Œæ•´æµç¨‹æµ‹è¯•ï¼ˆæ¨èï¼‰
```bash
# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•ï¼Œæœ€é€‚åˆæ–°æ‰‹éªŒè¯ç³»ç»Ÿ
python pipelines/test_pipeline.py

# æˆ–è€…é€šè¿‡ä¸»è„šæœ¬è¿è¡Œæµ‹è¯•æ¨¡å¼
python run_pipeline.py test
```

### 2. ç”Ÿäº§ç¯å¢ƒè¿è¡Œ
```bash
# å®Œæ•´ç”Ÿäº§æµç¨‹ï¼ˆå¤„ç†å…¨éƒ¨æ ‡çš„æ± ï¼‰
python run_pipeline.py

# å•ç‹¬æ­¥éª¤è°ƒè¯•
python run_pipeline.py factors    # ä»…å› å­è®¡ç®—
python run_pipeline.py ic         # ä»…ICåˆ†æ  
python run_pipeline.py fusion     # ä»…å› å­èåˆ
```

### 3. æ•°æ®ç®¡ç†æµ‹è¯•
```bash
# æµ‹è¯•æ™ºèƒ½ç¼“å­˜ï¼ˆé¦–æ¬¡ä¼šä¸‹è½½æ•°æ®ï¼‰
python scripts/build_data_warehouse.py

# æµ‹è¯•å¢é‡æ›´æ–°ï¼ˆç¬¬äºŒæ¬¡è¿è¡Œä¼šä½¿ç”¨ç¼“å­˜ï¼‰
python scripts/build_data_warehouse.py

# å¼ºåˆ¶åˆ·æ–°æµ‹è¯•
python scripts/build_data_warehouse.py --force
```

## æµ‹è¯•æµç¨‹è¯¦è§£

å®Œæ•´æµ‹è¯•åŒ…å«ä»¥ä¸‹ 6 ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼š

### 1. **å¼•æ“åˆå§‹åŒ–** 
- åˆå§‹åŒ–æ•°æ®æ¥å£ã€å› å­å¼•æ“ã€ICå¼•æ“ã€èåˆå¼•æ“
- éªŒè¯é…ç½®æ–‡ä»¶å’Œæ•°æ®è·¯å¾„
- é¢„è®¡ç”¨æ—¶: < 0.1ç§’

### 2. **å› å­è®¡ç®—**
- è®¡ç®—6ç§æŠ€æœ¯å› å­ï¼š`mom20`, `shortrev5`, `vol20`, `turn_mean20`, `amihud20`, `macd_signal`
- åŸºäº13ä¸ªæ ¸å¿ƒæ ‡çš„ï¼Œ861ä¸ªäº¤æ˜“æ—¥æ•°æ®
- é¢„è®¡ç”¨æ—¶: 1-2ç§’

### 3. **ICåˆ†æ** 
- è®¡ç®—å„å› å­ä¸å‰ç»æ”¶ç›Š(5æ—¥)çš„ä¿¡æ¯ç³»æ•°
- ç”ŸæˆICæ—¶é—´åºåˆ—ã€æ»šåŠ¨ç»Ÿè®¡ã€ç›¸å…³æ€§çŸ©é˜µ
- é¢„è®¡ç”¨æ—¶: 0.5-1ç§’

### 4. **å› å­èåˆ**
- ç­‰æƒèåˆå’ŒICåŠ æƒèåˆ
- åŸºäºå†å²ICè¡¨ç°è®¡ç®—åŠ¨æ€æƒé‡
- é¢„è®¡ç”¨æ—¶: 0.5ç§’

### 5. **èåˆéªŒè¯**
- éªŒè¯èåˆå› å­çš„ICè¡¨ç°
- ä¸å•å› å­è¡¨ç°å¯¹æ¯”åˆ†æ
- é¢„è®¡ç”¨æ—¶: 0.3ç§’

### 6. **ç»“æœä¿å­˜**
- è‡ªåŠ¨ä¿å­˜æ‰€æœ‰åˆ†ææŠ¥å‘Šå’Œå› å­æ•°æ®
- ç”Ÿæˆè¯¦ç»†çš„ç»Ÿè®¡æ‘˜è¦
- é¢„è®¡ç”¨æ—¶: 0.2ç§’

**æ€»é¢„æœŸç”¨æ—¶**: 2.6-4ç§’

## ğŸ“Š è¾“å‡ºæ–‡ä»¶è¯¦è§£

### æ ¸å¿ƒæŠ¥å‘Šæ–‡ä»¶ (`reports/`)
- `ic_summary.csv` - ICæ±‡æ€»ç»Ÿè®¡ï¼ˆå‡å€¼ã€æ ‡å‡†å·®ã€IRæ¯”ç‡ç­‰ï¼‰
- `factor_ranking.csv` - å› å­è¡¨ç°æ’åï¼ˆæŒ‰IRæ’åºï¼‰
- `ic_timeseries.csv` - ICæ—¶é—´åºåˆ—æ•°æ®
- `ic_rolling_mean.csv` - ICæ»šåŠ¨å‡å€¼ï¼ˆ20æ—¥çª—å£ï¼‰
- `ic_rolling_std.csv` - ICæ»šåŠ¨æ ‡å‡†å·®ï¼ˆ20æ—¥çª—å£ï¼‰
- `ic_correlation.csv` - å› å­é—´ç›¸å…³æ€§çŸ©é˜µ
- `fusion_weights.csv` - ICåŠ æƒèåˆçš„åŠ¨æ€æƒé‡
- `fusion_summary.txt` - èåˆç»“æœæ–‡å­—æ€»ç»“

### å› å­æ•°æ®æ–‡ä»¶ (`reports/factors/`)
- `mom20.csv` - 20æ—¥åŠ¨é‡å› å­ï¼ˆä»·æ ¼ç›¸å¯¹å¼ºåº¦ï¼‰
- `shortrev5.csv` - 5æ—¥çŸ­æœŸåè½¬å› å­ï¼ˆçŸ­æœŸå‡å€¼å›å½’ï¼‰
- `vol20.csv` - 20æ—¥æ³¢åŠ¨ç‡å› å­ï¼ˆæ”¶ç›Šç‡æ ‡å‡†å·®ï¼‰
- `turn_mean20.csv` - 20æ—¥å¹³å‡æ¢æ‰‹ç‡ï¼ˆæµåŠ¨æ€§æŒ‡æ ‡ï¼‰
- `amihud20.csv` - AmihudæµåŠ¨æ€§å› å­ï¼ˆä»·æ ¼å†²å‡»æˆæœ¬ï¼‰
- `macd_signal.csv` - MACDä¿¡å·å› å­ï¼ˆæŠ€æœ¯åˆ†ææŒ‡æ ‡ï¼‰
- `fusion_equal_weight.csv` - ç­‰æƒèåˆå› å­
- `fusion_ic_weight.csv` - ICåŠ æƒèåˆå› å­
- `all_factors.parquet` - æ‰€æœ‰å› å­çš„Parquetæ ¼å¼å­˜å‚¨

## ğŸ¯ å…¸å‹æµ‹è¯•ç»“æœ

åŸºäºå½“å‰æµ‹è¯•ç¯å¢ƒï¼ˆ13ä¸ªæ ¸å¿ƒæ ‡çš„ï¼Œ861ä¸ªäº¤æ˜“æ—¥ï¼Œ2022-2025æ•°æ®ï¼‰ï¼š

### å› å­è¡¨ç°æ’è¡Œ
1. **shortrev5** (çŸ­æœŸåè½¬) - ICâ‰ˆ0.020, IRâ‰ˆ0.096 â­
2. **turn_mean20** (æ¢æ‰‹ç‡) - ICâ‰ˆ0.014, IRâ‰ˆ0.082
3. **vol20** (æ³¢åŠ¨ç‡) - ICâ‰ˆ0.012, IRâ‰ˆ0.075
4. **amihud20** (æµåŠ¨æ€§) - ICâ‰ˆ0.008, IRâ‰ˆ0.045
5. **mom20** (åŠ¨é‡) - ICâ‰ˆ0.005, IRâ‰ˆ0.025
6. **macd_signal** (MACD) - ICâ‰ˆ0.003, IRâ‰ˆ0.018

### ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- **æ•°æ®è§„æ¨¡**: 13æ ‡çš„ Ã— 861äº¤æ˜“æ—¥ = 11,193æ¡è®°å½•
- **å¤„ç†é€Ÿåº¦**: å®Œæ•´æµç¨‹2.6ç§’
- **å†…å­˜å ç”¨**: < 100MB
- **ç£ç›˜å ç”¨**: çº¦15MBï¼ˆå«æ‰€æœ‰æŠ¥å‘Šï¼‰

### ç¼“å­˜æ€§èƒ½æµ‹è¯•
```bash
# é¦–æ¬¡è¿è¡Œï¼ˆéœ€è¦ä¸‹è½½ï¼‰
âœ… 000001.SH ä»APIè·å–æ•°æ®... (861å¤©, 2022-01-04~2025-07-24) [3.2s]

# ç¬¬äºŒæ¬¡è¿è¡Œï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰  
âœ… 000001.SH ä½¿ç”¨ç¼“å­˜æ•°æ® (861å¤©, 2022-01-04~2025-07-24) [0.1s]
```

**ç¼“å­˜å‘½ä¸­ç‡**: é€šå¸¸ > 95%ï¼Œå¤§å¹…å‡å°‘APIè°ƒç”¨

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. æ•°æ®ç›¸å…³é—®é¢˜
```bash
# é—®é¢˜ï¼šæ•°æ®ç¼ºå¤±æˆ–è¿‡æ—¶
# è§£å†³ï¼šé‡æ–°æ„å»ºæ•°æ®ä»“åº“
python scripts/build_data_warehouse.py --force

# é—®é¢˜ï¼šæ ‡çš„æ± ä¸ºç©º
# è§£å†³ï¼šæ£€æŸ¥æ ‡çš„æ± æ–‡ä»¶
cat config/universe_small.csv | wc -l  # åº”è¯¥ > 10

# é—®é¢˜ï¼šAPIä»¤ç‰Œæ— æ•ˆ
# è§£å†³ï¼šæ£€æŸ¥.envé…ç½®
cat .env | grep TUSHARE_TOKEN
```

#### 2. æ€§èƒ½é—®é¢˜
```bash
# é—®é¢˜ï¼šå¤„ç†é€Ÿåº¦è¿‡æ…¢
# æ£€æŸ¥ï¼šæ•°æ®è§„æ¨¡æ˜¯å¦åˆç†
python -c "import pandas as pd; print(pd.read_csv('config/universe_small.csv').shape)"

# é—®é¢˜ï¼šå†…å­˜ä¸è¶³
# è§£å†³ï¼šä½¿ç”¨æ›´å°çš„æ ‡çš„æ± è¿›è¡Œæµ‹è¯•
python scripts/filter_universe.py --target_type index --index_type main
```

#### 3. æƒé™å’Œè·¯å¾„é—®é¢˜
```bash
# æ£€æŸ¥ç›®å½•æƒé™
ls -la reports/ data/

# ç¡®ä¿å¿…è¦ç›®å½•å­˜åœ¨
mkdir -p reports/factors logs data/processed
```

### æ•°æ®çŠ¶æ€æ£€æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥æ•°æ®æ–‡ä»¶çŠ¶æ€
find data/processed -name "*.parquet" | wc -l

# æ£€æŸ¥æœ€è¿‘çš„æ—¥å¿—
tail -20 logs/data_build.log

# éªŒè¯å› å­é…ç½®
python -c "import yaml; print(yaml.safe_load(open('config/factors.yml')))"

# æ£€æŸ¥APIè¿æ¥
python -c "import tushare as ts; import os; from dotenv import load_dotenv; load_dotenv(); print('API OK' if ts.pro_api(os.getenv('TUSHARE_TOKEN')) else 'API Error')"
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### é’ˆå¯¹ä¸åŒä½¿ç”¨åœºæ™¯

1. **å¿«é€ŸéªŒè¯** (< 5ç§’)
   ```bash
   # ä½¿ç”¨é¢„è®¾çš„13ä¸ªæ ¸å¿ƒæ ‡çš„
   python pipelines/test_pipeline.py
   ```

2. **ä¸­ç­‰è§„æ¨¡æµ‹è¯•** (< 30ç§’)
   ```bash
   # ç­›é€‰100-200ä¸ªä¸»è¦æ ‡çš„
   python scripts/filter_universe.py --target_type both --etf_type main --index_type main
   python run_pipeline.py
   ```

3. **å¤§è§„æ¨¡åˆ†æ** (å‡ åˆ†é’Ÿ)
   ```bash
   # ä½¿ç”¨å®Œæ•´æ ‡çš„æ± è¿›è¡Œç”Ÿäº§çº§åˆ†æ
   # å»ºè®®å…ˆç¡®ä¿ç³»ç»Ÿèµ„æºå……è¶³
   python scripts/filter_universe.py --target_type both --etf_type all --index_type all
   python run_pipeline.py
   ```

## ğŸ“ˆ ä¸‹ä¸€æ­¥å‘å±•

æµ‹è¯•æˆåŠŸåï¼Œæ¡†æ¶å·²å…·å¤‡ä»¥ä¸‹æ‰©å±•èƒ½åŠ›ï¼š

### å³å°†æ”¯æŒçš„åŠŸèƒ½
1. **vectorbtå›æµ‹å¼•æ“é›†æˆ** - å®Œæ•´çš„å†å²å›æµ‹
2. **å®æ—¶ä¿¡å·ç”Ÿæˆ** - åŸºäºæœ€æ–°æ•°æ®çš„äº¤æ˜“ä¿¡å·
3. **é£é™©ç®¡ç†æ¨¡å—** - ç»„åˆé£é™©è¯„ä¼°å’Œæ§åˆ¶
4. **å¯è§†åŒ–ä»ªè¡¨æ¿** - Webç•Œé¢çš„å®æ—¶ç›‘æ§

### æŠ€æœ¯æ‰©å±•æ–¹å‘
1. **æ›´å¤šå› å­ç±»å‹** - åŸºæœ¬é¢ã€æƒ…ç»ªã€å®è§‚å› å­
2. **æœºå™¨å­¦ä¹ å¢å¼º** - éçº¿æ€§å› å­æŒ–æ˜
3. **å¤šé¢‘ç‡åˆ†æ** - æ—¥å†…ã€å‘¨åº¦ã€æœˆåº¦å› å­
4. **è·¨èµ„äº§åˆ†æ** - è‚¡ç¥¨ã€æœŸè´§ã€æœŸæƒè”åŠ¨

---
*æœ€åæ›´æ–°: 2025å¹´7æœˆ25æ—¥*
