# ETF/指数因子计算与回测配置文件

# 数据配置
data:
  start_date: "20230101"
  end_date: "20250722"
  universe_file: "config/universe_local.csv"  # 原始universe文件，系统将自动筛选高质量标的
  
# 数据路径
paths:
  processed_data: "data/processed"
  factors_output: "reports/factors"
  ic_output: "reports"
  fusion_output: "reports"

# 因子配置 - 适用于ETF/指数
factors:
  # 动量类因子
  mom20:
    enabled: true
    window: 20
    description: "20日动量因子"
    
  shortrev5:
    enabled: true
    window: 5
    description: "5日短期反转因子"
    
  # 波动率因子
  vol20:
    enabled: true
    window: 20
    description: "20日收益率标准差"
    
  # 流动性因子
  turn_mean20:
    enabled: true
    window: 20
    description: "20日换手率均值"
    
  amihud20:
    enabled: true
    window: 20
    description: "Amihud流动性因子"
    
  # 技术指标因子
  macd_signal:
    enabled: true
    fast: 12
    slow: 26
    signal: 9
    description: "MACD信号因子"
    


# 数据预处理配置
preprocessing:
  winsorize:
    enabled: true
    quantiles: [0.01, 0.99]
  zscore:
    enabled: true
  forward_fill:
    enabled: true
    max_days: 5

# IC分析配置
ic:
  window: 60
  min_samples: 3  # 改为3个样本，适应6个标的的情况
  forward_return_days: 1
  correlation_method: "spearman"
  
# 因子融合配置
fusion:
  methods: 
    - "equal_weight"
    - "ic_weight" 
    - "lgb"
  lookback_window: 252
  train_test_split: 0.7
  
  # LightGBM参数
  lgb_params:
    objective: "regression"
    metric: "rmse"
    boosting_type: "gbdt"
    num_leaves: 31
    learning_rate: 0.05
    feature_fraction: 0.9
    bagging_fraction: 0.8
    bagging_freq: 5
    verbose: -1

# 并行计算配置
parallel:
  n_jobs: 4
  use_multiprocessing: false

# Universe质量筛选配置
universe_filter:
  enabled: true  # 是否启用自动筛选
  min_coverage_rate: 0.65  # 最低综合覆盖率
  min_close_coverage: 0.8  # 最低收盘价覆盖率  
  min_trading_days: 100   # 最少交易天数
  max_universe_size: 150  # 最大标的数量
  auto_update_days: 7     # 自动更新间隔（天）
