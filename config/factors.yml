# ETF/æŒ‡æ•°å› å­è®¡ç®—ä¸å›æµ‹é…ç½®æ–‡ä»¶

# æ•°æ®é…ç½®
data:
  start_date: "20210101"
  end_date: "20250722"
  universe_file: "config/universe_local.csv"  # åŸå§‹universeæ–‡ä»¶ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ç­›é€‰é«˜è´¨é‡æ ‡çš„
  
# æ•°æ®è·¯å¾„
paths:
  processed_data: "data/processed"
  factors_output: "reports/factors"
  ic_output: "reports"
  fusion_output: "reports"

# å› å­é…ç½® - é€‚ç”¨äºETF/æŒ‡æ•°
factors:
  # åŠ¨é‡ç±»å› å­
  mom20:
    enabled: true
    window: 20
    description: "20æ—¥åŠ¨é‡å› å­"
    
  shortrev5:
    enabled: true
    window: 5
    description: "5æ—¥çŸ­æœŸåè½¬å› å­"
    
  # æ³¢åŠ¨ç‡å› å­
  vol20:
    enabled: true
    window: 20
    description: "20æ—¥æ”¶ç›Šç‡æ ‡å‡†å·®"
    
  # æµåŠ¨æ€§å› å­
  turn_mean20:
    enabled: true
    window: 20
    description: "20æ—¥æ¢æ‰‹ç‡å‡å€¼"
    
  amihud20:
    enabled: true
    window: 20
    description: "AmihudæµåŠ¨æ€§å› å­"
    
  # æŠ€æœ¯æŒ‡æ ‡å› å­
  macd_signal:
    enabled: true
    fast: 12
    slow: 26
    signal: 9
    description: "MACDä¿¡å·å› å­"
    
  # ========== Talib æŠ€æœ¯æŒ‡æ ‡å› å­åº“ ==========
  
  # RSI ç›¸å¯¹å¼ºå¼±æŒ‡æ ‡
  rsi14:
    enabled: true
    window: 14
    description: "RSIç›¸å¯¹å¼ºå¼±æŒ‡æ ‡ (14æ—¥)"
    
  # MACD æŸ±çŠ¶å›¾
  macd_histogram:
    enabled: true
    fast: 12
    slow: 26
    signal: 9
    description: "MACDæŸ±çŠ¶å›¾å› å­"
    
  # å¸ƒæ—å¸¦ä½ç½®
  bollinger_position:
    enabled: true
    window: 20
    std_dev: 2.0
    description: "å¸ƒæ—å¸¦ä½ç½®å› å­ (ä»·æ ¼åœ¨å¸ƒæ—å¸¦ä¸­çš„ç›¸å¯¹ä½ç½®)"
    
  # å¨å»‰æŒ‡æ ‡
  williams_r:
    enabled: true
    window: 14
    description: "å¨å»‰æŒ‡æ ‡ Williams %R"
    
  # éšæœºæŒ‡æ ‡ K å€¼
  stoch_k:
    enabled: true
    k_period: 14
    d_period: 3
    smooth_k: 3
    description: "éšæœºæŒ‡æ ‡ KD ä¸­çš„ K å€¼"
    
  # å•†å“é€šé“æŒ‡æ ‡
  cci14:
    enabled: true
    window: 14
    description: "å•†å“é€šé“æŒ‡æ ‡ CCI (14æ—¥)"
    
  # å¹³å‡è¶‹å‘æŒ‡æ ‡
  adx14:
    enabled: true
    window: 14
    description: "å¹³å‡è¶‹å‘æŒ‡æ ‡ ADX (14æ—¥)"
    
  # èƒ½é‡æ½®æŒ‡æ ‡
  obv_signal:
    enabled: true
    window: 20
    description: "èƒ½é‡æ½®æŒ‡æ ‡ OBV æ ‡å‡†åŒ–ä¿¡å·"
    
  # ========== TA-Lib é‡å ç ”ç©¶æŒ‡æ ‡ (Overlap Studies) ==========
  
  # ç®€å•ç§»åŠ¨å¹³å‡çº¿
  sma20:
    enabled: true
    window: 20
    description: "ç®€å•ç§»åŠ¨å¹³å‡çº¿ SMA (20æ—¥)"
    
  # æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿
  ema20:
    enabled: true
    window: 20
    description: "æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿ EMA (20æ—¥)"
    
  # ä¸‰é‡æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿
  tema20:
    enabled: true
    window: 20
    description: "ä¸‰é‡æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿ TEMA (20æ—¥)"
    
  # Kaufmanè‡ªé€‚åº”ç§»åŠ¨å¹³å‡çº¿
  kama20:
    enabled: true
    window: 20
    description: "Kaufmanè‡ªé€‚åº”ç§»åŠ¨å¹³å‡çº¿ KAMA (20æ—¥)"
    
  # æŠ›ç‰©çº¿SAR
  sar:
    enabled: true
    acceleration: 0.02
    maximum: 0.2
    description: "æŠ›ç‰©çº¿SARåœæŸè½¬å‘æŒ‡æ ‡"
    
  # ========== TA-Lib åŠ¨é‡æŒ‡æ ‡ (Momentum Indicators) ==========
  
  # ç»å¯¹ä»·æ ¼æŒ¯è¡å™¨
  apo_12_26:
    enabled: true
    fast: 12
    slow: 26
    description: "ç»å¯¹ä»·æ ¼æŒ¯è¡å™¨ APO"
    

    
  # AroonæŒ¯è¡å™¨
  aroonosc14:
    enabled: true
    window: 14
    description: "AroonæŒ¯è¡å™¨ (14æ—¥)"
    
  # åŠ›é‡å¹³è¡¡æŒ‡æ ‡
  bop:
    enabled: true
    description: "åŠ›é‡å¹³è¡¡æŒ‡æ ‡ BOP"
    
  # ChandeåŠ¨é‡æŒ¯è¡å™¨
  cmo14:
    enabled: true
    window: 14
    description: "ChandeåŠ¨é‡æŒ¯è¡å™¨ CMO (14æ—¥)"
    
  # æ–¹å‘æ€§è¿åŠ¨æŒ‡æ ‡
  dx14:
    enabled: true
    window: 14
    description: "æ–¹å‘æ€§è¿åŠ¨æŒ‡æ ‡ DX (14æ—¥)"
    
  # èµ„é‡‘æµé‡æŒ‡æ ‡
  mfi14:
    enabled: true
    window: 14
    description: "èµ„é‡‘æµé‡æŒ‡æ ‡ MFI (14æ—¥)"
    
  # åŠ¨é‡æŒ‡æ ‡
  mom10:
    enabled: true
    window: 10
    description: "åŠ¨é‡æŒ‡æ ‡ MOM (10æ—¥)"
    
  # ä»·æ ¼æŒ¯è¡å™¨ç™¾åˆ†æ¯”
  ppo_12_26:
    enabled: true
    fast: 12
    slow: 26
    description: "ä»·æ ¼æŒ¯è¡å™¨ç™¾åˆ†æ¯” PPO"
    
  # å˜åŒ–ç‡
  roc10:
    enabled: true
    window: 10
    description: "å˜åŒ–ç‡ ROC (10æ—¥)"
    
  # å¿«é€ŸéšæœºæŒ‡æ ‡
  stochf14:
    enabled: true
    k_period: 14
    d_period: 3
    description: "å¿«é€ŸéšæœºæŒ‡æ ‡ STOCHF"
    
  # TRIXæŒ‡æ ‡
  trix14:
    enabled: true
    window: 14
    description: "TRIXæŒ‡æ ‡ (14æ—¥)"
    
  # ç»ˆææŒ¯è¡å™¨
  ultosc:
    enabled: true
    period1: 7
    period2: 14
    period3: 28
    description: "ç»ˆææŒ¯è¡å™¨ ULTOSC"
    
  # ========== TA-Lib æˆäº¤é‡æŒ‡æ ‡ (Volume Indicators) ==========
  
  # ç´¯ç§¯/æ´¾å‘çº¿
  ad_line:
    enabled: true
    description: "ç´¯ç§¯/æ´¾å‘çº¿ A/D Line"
    
  # ç´¯ç§¯/æ´¾å‘æŒ¯è¡å™¨
  adosc:
    enabled: true
    fast: 3
    slow: 10
    description: "ç´¯ç§¯/æ´¾å‘æŒ¯è¡å™¨ ADOSC"
    
  # ========== TA-Lib æ³¢åŠ¨ç‡æŒ‡æ ‡ (Volatility Indicators) ==========
  
  # å¹³å‡çœŸå®æ³¢å¹…
  atr14:
    enabled: true
    window: 14
    description: "å¹³å‡çœŸå®æ³¢å¹… ATR (14æ—¥)"
    
  # æ ‡å‡†åŒ–å¹³å‡çœŸå®æ³¢å¹…
  natr14:
    enabled: true
    window: 14
    description: "æ ‡å‡†åŒ–å¹³å‡çœŸå®æ³¢å¹… NATR (14æ—¥)"
    
  # çœŸå®æ³¢å¹…
  trange:
    enabled: true
    description: "çœŸå®æ³¢å¹… TRANGE"
    
  # ========== TA-Lib ä»·æ ¼å˜æ¢æŒ‡æ ‡ (Price Transform) ==========
  
  # å¹³å‡ä»·æ ¼
  avgprice:
    enabled: true
    description: "å¹³å‡ä»·æ ¼ AVGPRICE"
    
  # ä¸­ä½ä»·æ ¼
  medprice:
    enabled: true
    description: "ä¸­ä½ä»·æ ¼ MEDPRICE"
    
  # å…¸å‹ä»·æ ¼
  typprice:
    enabled: true
    description: "å…¸å‹ä»·æ ¼ TYPPRICE"
    
  # åŠ æƒæ”¶ç›˜ä»·æ ¼
  wclprice:
    enabled: true
    description: "åŠ æƒæ”¶ç›˜ä»·æ ¼ WCLPRICE"
    
  # ========== TA-Lib ç»Ÿè®¡å‡½æ•° (Statistic Functions) ==========
  
  # Betaç³»æ•°
  beta5:
    enabled: true
    window: 5
    description: "Betaç³»æ•° (5æ—¥)"
    
  # çš®å°”é€Šç›¸å…³ç³»æ•°
  correl5:
    enabled: true
    window: 5
    description: "çš®å°”é€Šç›¸å…³ç³»æ•° (5æ—¥)"
    
  # çº¿æ€§å›å½’
  linearreg14:
    enabled: true
    window: 14
    description: "çº¿æ€§å›å½’ (14æ—¥)"
    
  # æ ‡å‡†å·®
  stddev20:
    enabled: true
    window: 20
    description: "æ ‡å‡†å·® (20æ—¥)"
    
  # æ—¶é—´åºåˆ—é¢„æµ‹
  tsf14:
    enabled: true
    window: 14
    description: "æ—¶é—´åºåˆ—é¢„æµ‹ (14æ—¥)"
    
  # æ–¹å·®
  var20:
    enabled: true
    window: 20
    description: "æ–¹å·® (20æ—¥)"
    
  # ========== æ–°å¢çš„é‡å ç ”ç©¶æŒ‡æ ‡ ==========
  
  # åŒæŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿
  dema20:
    enabled: true
    window: 20
    description: "åŒæŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿ DEMA (20æ—¥)"
    
  # åŠ æƒç§»åŠ¨å¹³å‡çº¿
  wma20:
    enabled: true
    window: 20
    description: "åŠ æƒç§»åŠ¨å¹³å‡çº¿ WMA (20æ—¥)"
    
  # ä¸‰è§’ç§»åŠ¨å¹³å‡çº¿
  trima20:
    enabled: true
    window: 20
    description: "ä¸‰è§’ç§»åŠ¨å¹³å‡çº¿ TRIMA (20æ—¥)"
    
  # ä¸‰é‡æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿T3
  t3_20:
    enabled: true
    window: 20
    vfactor: 0.7
    description: "ä¸‰é‡æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿ T3 (20æ—¥)"
    
  # ä¸­ç‚¹
  midpoint14:
    enabled: true
    window: 14
    description: "ä¸­ç‚¹ MIDPOINT (14æ—¥)"
    
  # ä¸­ç‚¹ä»·æ ¼
  midprice14:
    enabled: true
    window: 14
    description: "ä¸­ç‚¹ä»·æ ¼ MIDPRICE (14æ—¥)"
    
  # ========== æ–°å¢çš„åŠ¨é‡æŒ‡æ ‡ ==========
  
  # ADXè¯„çº§
  adxr14:
    enabled: true
    window: 14
    description: "ADXè¯„çº§ ADXR (14æ—¥)"
    
  # å¯æ§MAç±»å‹çš„MACD
  macdext_12_26_9:
    enabled: true
    fast: 12
    slow: 26
    signal: 9
    description: "å¯æ§MAç±»å‹çš„MACD MACDEXT"
    
  # MACDå›ºå®š12/26
  macdfix9:
    enabled: true
    signal: 9
    description: "MACDå›ºå®š12/26 MACDFIX"
    
  # è´Ÿå‘æŒ‡æ ‡
  minus_di14:
    enabled: true
    window: 14
    description: "è´Ÿå‘æŒ‡æ ‡ MINUS_DI (14æ—¥)"
    
  # è´Ÿå‘è¿åŠ¨
  minus_dm14:
    enabled: true
    window: 14
    description: "è´Ÿå‘è¿åŠ¨ MINUS_DM (14æ—¥)"
    
  # æ­£å‘æŒ‡æ ‡
  plus_di14:
    enabled: true
    window: 14
    description: "æ­£å‘æŒ‡æ ‡ PLUS_DI (14æ—¥)"
    
  # æ­£å‘è¿åŠ¨
  plus_dm14:
    enabled: true
    window: 14
    description: "æ­£å‘è¿åŠ¨ PLUS_DM (14æ—¥)"
    
  # å˜åŒ–ç‡ç™¾åˆ†æ¯”
  rocp10:
    enabled: true
    window: 10
    description: "å˜åŒ–ç‡ç™¾åˆ†æ¯” ROCP (10æ—¥)"
    
  # å˜åŒ–ç‡æ¯”ç‡
  rocr10:
    enabled: true
    window: 10
    description: "å˜åŒ–ç‡æ¯”ç‡ ROCR (10æ—¥)"
    
  # å˜åŒ–ç‡æ¯”ç‡100å€
  rocr100_10:
    enabled: true
    window: 10
    description: "å˜åŒ–ç‡æ¯”ç‡100å€ ROCR100 (10æ—¥)"
    

    
  # ========== æ–°å¢çš„æˆäº¤é‡æŒ‡æ ‡ ==========
  
  # å‡€æˆäº¤é‡æŒ‡æ ‡
  obv_line:
    enabled: true
    description: "å‡€æˆäº¤é‡æŒ‡æ ‡ OBV"
    
  # ========== æ–°å¢çš„å‘¨æœŸæŒ‡æ ‡ (å…¨æ–°ç±»åˆ«) ==========
  
  # å‘¨æœŸæŒ‡æ ‡å·²åˆ é™¤ - å¸Œå°”ä¼¯ç‰¹å˜æ¢å› å­å­˜åœ¨è®¡ç®—é—®é¢˜ï¼Œæš‚æ—¶ç§»é™¤


# æ•°æ®é¢„å¤„ç†é…ç½®

# æ•°æ®é¢„å¤„ç†é…ç½®
preprocessing:
  winsorize:
    enabled: true
    quantiles: [0.01, 0.99]
  zscore:
    enabled: true
  forward_fill:
    enabled: true          # ğŸ”§ é‡æ–°å¯ç”¨å‰å‘å¡«å……
    max_days: 20           # å¢åŠ åˆ°15å¤©ï¼Œæ”¹å–„è¦†ç›–ç‡

# ICåˆ†æé…ç½®
ic:
  window: 60
  min_samples: 2  # é™ä½åˆ°2ä¸ªæ ·æœ¬ï¼Œæé«˜ICè®¡ç®—çš„æ•°æ®åˆ©ç”¨ç‡
  forward_return_days: 1
  correlation_method: "spearman"
  
# å› å­èåˆé…ç½®
fusion:
  methods: 
    - "equal_weight"
    - "ic_weight" 
    - "lgb"
  lookback_window: 252
  train_test_split: 0.7
  
  # LightGBMå‚æ•°
  lgb_params:
    objective: "regression"
    metric: "rmse"
    boosting_type: "gbdt"
    num_leaves: 31
    learning_rate: 0.05
    feature_fraction: 0.9
    bagging_fraction: 0.8
    bagging_freq: 5
    verbose: -1

# å¹¶è¡Œè®¡ç®—é…ç½®
parallel:
  n_jobs: 4
  use_multiprocessing: true

# Universeè´¨é‡ç­›é€‰é…ç½®
universe_filter:
  enabled: true  # æ˜¯å¦å¯ç”¨è‡ªåŠ¨ç­›é€‰
  min_coverage_rate: 0.7   # ğŸ”§ é™ä½åˆ°70%ï¼Œæ›´ç°å®çš„è¦æ±‚
  min_close_coverage: 0.8  # ğŸ”§ é™ä½åˆ°80%ï¼Œå¹³è¡¡è´¨é‡å’Œæ•°é‡
  min_trading_days: 100    # æœ€å°‘äº¤æ˜“å¤©æ•°
  max_universe_size: 500   # æœ€å¤§æ ‡çš„æ•°é‡
  auto_update_days: 7      # è‡ªåŠ¨æ›´æ–°é—´éš”ï¼ˆå¤©ï¼‰
